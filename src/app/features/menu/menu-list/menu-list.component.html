
<div class="container mx-auto p-4">
  <div class="flex justify-between items-center mb-4">
    <h1 class="text-2xl font-bold">Menu Configuration</h1>
    <a routerLink="/menu/new" class="px-4 py-2 text-sm font-medium text-white bg-primary rounded-md hover:opacity-80">
      Create New Menu Item
    </a>
  </div>
  <div *ngIf="menuItems$ | async as menuItems; else loading" class="bg-bg-surface shadow-md rounded-lg">
    <div *ngIf="menuItems.length > 0; else empty">
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-bg-base">
          <thead class="bg-bg-base">
            <tr>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-text-main/70 uppercase tracking-wider">Label</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-text-main/70 uppercase tracking-wider">Position</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-text-main/70 uppercase tracking-wider">Associated Entity</th>
              <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-text-main/70 uppercase tracking-wider">Visible to Groups</th>
              <th scope="col" class="relative px-6 py-3"><span class="sr-only">Actions</span></th>
            </tr>
          </thead>
          <tbody class="bg-bg-surface divide-y divide-bg-base">
            <tr *ngFor="let item of menuItems" class="hover:bg-bg-base">
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="text-sm font-medium text-text-main">{{ item.label }}</div>
                <div class="text-sm text-text-main/70">{{ item.icon ? 'Icon: ' + item.icon : '' }}</div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-text-main/70">{{ item.position }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-text-main/70">{{ item.entityKey || 'None' }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-text-main/70">{{ item.groups?.join(', ') || 'All' }}</td>
              <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-4">
                <a [routerLink]="['/menu/edit', item.id]" class="text-accent hover:underline">Edit</a>
                <button (click)="onDelete(item.id)" class="text-red-500 hover:underline">Delete</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <ng-template #empty>
      <p class="p-4 text-text-main/70">No menu items found. Click "Create New Menu Item" to get started.</p>
    </ng-template>
  </div>
  <ng-template #loading>
    <p>Loading...</p>
  </ng-template>
</div>
